<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

    <title>AirHarvest by watson</title>
  </head>

  <body>

    <header>
      <div class="container">
        <h1>AirHarvest</h1>
        <h2>Help make AirPlay open: AirHarvest scans your network for AirPlay services and anonymously shares the details in an open repository for further research</h2>

        <section id="downloads">
          <a href="https://github.com/watson/airharvest/zipball/master" class="btn">Download as .zip</a>
          <a href="https://github.com/watson/airharvest/tarball/master" class="btn">Download as .tar.gz</a>
          <a href="https://github.com/watson/airharvest" class="btn btn-github"><span class="icon"></span>View on GitHub</a>
        </section>
      </div>
    </header>

    <div class="container">
      <section id="main_content">
        <h1>
<a name="airharvest" class="anchor" href="#airharvest"><span class="octicon octicon-link"></span></a>AirHarvest</h1>

<p>The Apple AirPlay and RAOP protocols are the foundation of Apple TV and
all AirPlay compatible hardware. The two protocols are continuesly
evolving and new features are added all the time. Cl√©ment Vasseur did <a href="http://nto.github.io/AirPlay.html">a
fantastic job documenting</a> most of
the two protocols in 2012, but since then a lot have happended.</p>

<p>This project is a first step in trying to fully uncover the two
protocols.</p>

<p>Each new OS release for Apple TV and AirPort Express introduces slight
changes to the two protocols. So an important part of the reverse
engineering is to get snapshots of how the different OS and hardware
combinations expose them selfs on the network.</p>

<p>This project does just that.</p>

<h3>
<a name="important-note-about-privacy" class="anchor" href="#important-note-about-privacy"><span class="octicon octicon-link"></span></a>Important note about privacy</h3>

<p>Installing an running this software on your computer will collect and
send information about all AirPlay and RAOP compatible devices on your
network <strong>to a public database</strong>.</p>

<p>See below if you'd like to know what kind of information is collected.</p>

<h2>
<a name="installation" class="anchor" href="#installation"><span class="octicon octicon-link"></span></a>Installation</h2>

<p>This is a Node.js module, so if you don't already have Node.js
installed, <a href="http://nodejs.org/">go ahead and do so first</a>.</p>

<p>Then run the following to install AirHarvest:</p>

<pre><code>npm install -g airharvest
</code></pre>

<p>If you are not comfortable with the command line, you can help by
telling your friends about this project instead.</p>

<p><strong>Note:</strong> This have not been tested on Windows and since it have binary
dependencies, this might get tricky. Please open issues if you have any
problmes installing or running this software.</p>

<h2>
<a name="run-it" class="anchor" href="#run-it"><span class="octicon octicon-link"></span></a>Run it!</h2>

<p>Just run the <code>airharvest</code> command from your command line :)</p>

<h2>
<a name="what-does-the-collected-data-look-like" class="anchor" href="#what-does-the-collected-data-look-like"><span class="octicon octicon-link"></span></a>What does the collected data look like?</h2>

<p>This is an example of what kind of RAOP data is collected:</p>

<div class="highlight highlight-json"><pre><span class="p">{</span>
    <span class="nt">"type"</span><span class="p">:</span> <span class="s2">"raop"</span><span class="p">,</span>
    <span class="nt">"port"</span><span class="p">:</span> <span class="mi">5000</span><span class="p">,</span>
    <span class="nt">"txt"</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">"cn"</span><span class="p">:</span> <span class="s2">"0,1,2,3"</span><span class="p">,</span>
        <span class="nt">"da"</span><span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
        <span class="nt">"et"</span><span class="p">:</span> <span class="s2">"0,3,5"</span><span class="p">,</span>
        <span class="nt">"ft"</span><span class="p">:</span> <span class="s2">"0x5A7FFFF7,0xE"</span><span class="p">,</span>
        <span class="nt">"md"</span><span class="p">:</span> <span class="s2">"0,1,2"</span><span class="p">,</span>
        <span class="nt">"am"</span><span class="p">:</span> <span class="s2">"AppleTV3,1"</span><span class="p">,</span>
        <span class="nt">"pk"</span><span class="p">:</span> <span class="s2">"****************************************************************"</span><span class="p">,</span>
        <span class="nt">"sf"</span><span class="p">:</span> <span class="s2">"0x44"</span><span class="p">,</span>
        <span class="nt">"tp"</span><span class="p">:</span> <span class="s2">"UDP"</span><span class="p">,</span>
        <span class="nt">"vn"</span><span class="p">:</span> <span class="s2">"65537"</span><span class="p">,</span>
        <span class="nt">"vs"</span><span class="p">:</span> <span class="s2">"200.54"</span><span class="p">,</span>
        <span class="nt">"vv"</span><span class="p">:</span> <span class="s2">"2"</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>This is an example of what kind of AirPlay data is collected:</p>

<div class="highlight highlight-json"><pre><span class="p">{</span>
    <span class="nt">"type"</span><span class="p">:</span> <span class="s2">"airplay"</span><span class="p">,</span>
    <span class="nt">"port"</span><span class="p">:</span> <span class="mi">7000</span><span class="p">,</span>
    <span class="nt">"txt"</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">"deviceid"</span><span class="p">:</span> <span class="s2">"***"</span><span class="p">,</span>
        <span class="nt">"features"</span><span class="p">:</span> <span class="s2">"0x5A7FFFF7,0xE"</span><span class="p">,</span>
        <span class="nt">"flags"</span><span class="p">:</span> <span class="s2">"0x44"</span><span class="p">,</span>
        <span class="nt">"model"</span><span class="p">:</span> <span class="s2">"AppleTV3,1"</span><span class="p">,</span>
        <span class="nt">"pk"</span><span class="p">:</span> <span class="s2">"****************************************************************"</span><span class="p">,</span>
        <span class="nt">"srcvers"</span><span class="p">:</span> <span class="s2">"200.54"</span><span class="p">,</span>
        <span class="nt">"vv"</span><span class="p">:</span> <span class="s2">"2"</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<h2>
<a name="license" class="anchor" href="#license"><span class="octicon octicon-link"></span></a>License</h2>

<p>MIT</p>
      </section>
    </div>

              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-53253056-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>